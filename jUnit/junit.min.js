String.prototype.formatWith=function(){var b=this,a=0,c=arguments.length;for(a;a<c;a++)b=b.replace("{"+a+"}",arguments[a]);return b};(function(b){var a={};a.undefined=a.__undefined__;a.canLog=typeof b.console==="object";a.console={log:function(c){a.canLog&&b.console.log(c)},success:function(c){a.canLog&&b.console.log("%c{0}".formatWith(c),"color:green")},fail:function(c){a.canLog&&b.console.log("%c{0}".formatWith(c),"color:red")},group:function(c){a.canLog&&b.console.group(c)},groupEnd:function(){a.canLog&&b.console.groupEnd()},info:function(c){a.canLog&&b.console.info(c)}};a.util={};a.util.inherit=function(c,b){var a=function(){};a.prototype=b.prototype;c.prototype=new a};a.util.argsToArray=function(c){var b=[],a=0;for(a;a<c.length;a++)b.push(c[a]);return b};a.Guts=function(){this.specGroups=[];this.currentSpecGroup=null;this.predicateClass=function(){a.Predicates.apply(this,arguments)};a.util.inherit(this.predicateClass,a.Predicates);a.Predicates.wrapInto_(a.Predicates.prototype,this.predicateClass)};a.Guts.prototype.getCurrentSpecGroup=function(){return this.currentSpecGroup};a.getGuts=function(){return a.currentGuts=a.currentGuts||new a.Guts};b.when=function(c,d){var b=new a.SpecGroup(c,d);a.getGuts().specGroups.push(b);a.getGuts().currentSpecGroup=b;b.runSpecs()};b.spec=function(d){var c=new a.Spec(d),b;b=a.getGuts().getCurrentSpecGroup();b.specs.push(c);b.currentSpec=c;return this};b.expect=function(b){var c=a.getGuts().getCurrentSpecGroup().getCurrentSpec();return c.expect(b)};a.SpecGroup=function(a,b){this.description=a;this.specs=[];this.func=b;this.currentSpec=null};a.SpecGroup.prototype.runSpecs=function(){this.func();a.processSpecGroup(this)};a.SpecGroup.prototype.getCurrentSpec=function(){return this.currentSpec};a.processSpecGroup=function(e){var b=0,h=e.specs,d,f=0,g=0,c;d=function(b,c){a.console[b.logType]("{0}  -> ({1}ms)".formatWith(b.message,c));if(b.logType==="fail")g++;else f++};a.console.group(e.description);for(b;b<h.length;b++){c=h[b];d(c.result,c.exeTime)}a.console.info("Passed: {0}   Failed: {1}".formatWith(f,g));a.console.groupEnd()};a.Spec=function(a){this.name=a;this.result=null;this.expected=null;this.actual=null;this.isNot=false;this.exeTime=0};a.Spec.prototype.not=function(){this.isNot=true;return this};a.Spec.prototype.getPredicatesClass=function(){return a.getGuts().predicateClass};a.Spec.prototype.setSpecResult=function(a){this.result=a};a.Spec.prototype.expect=function(d){var e=a.getGuts(),c,b;c=this.getPredicatesClass().prototype;for(b in c)a.Spec.prototype[b]=c[b];a.Predicates.apply(this,[e,d,this,false]);return this};a.SpecResult=function(a,b){this.logType=a;this.message=b};a.Predicates=function(c,b,d,a){this.isNot=a;this.guts=c;this.actual=b;this.spec=d};a.Predicates.wrapInto_=function(c,e){var b,d;for(b in c){d=c[b];e.prototype[b]=a.Predicates.predicateFn_(b,d)}};a.Predicates.predicateFn_=function(c,b){return function(){var k=a.util.argsToArray(arguments),i,c,j,d,f,e,g,h;i=(new Date).getTime();if(typeof this.actual==="function"){this.actual=this.actual();arguments[0]=this.actual}c=b.apply(this,arguments);j=(new Date).getTime();d=j-i;this.exeTime=d===0?1:d;if(this.isNot)c=!c;if(c){f="    - Passed";e="success"}else{g=this.isNot?"but was not":"but was";f='    - Fail: expected "{0}" {1} "{2}"'.formatWith(this.expected,g,this.actual);e="fail"}h=new a.SpecResult(e,f);this.spec.setSpecResult(h)}};a.Predicates.prototype.toBe=function(a){this.expected=a;return a===this.actual};a.Predicates.prototype.toMatch=function(a){this.expected=a;return(new RegExp(a)).test(this.actual)};a.Predicates.prototype.toBeUndefined=function(){this.expected="undefined";return this.actual===a.undefined};a.Predicates.prototype.toBeNull=function(){this.expected="null";return this.actual===null};a.Predicates.prototype.toBeTrue=function(){this.expected="true";return this.actual===true};a.Predicates.prototype.toBeNumeric=function(){var c=typeof this.actual,b;b="number (type: "+c+")";this.expected=b;return this.actual!==null&&this.actual!==a.undefined&&c!=="string"&&!isNaN(this.actual)};b.jn=a})(typeof window==="undefined"?this:window)